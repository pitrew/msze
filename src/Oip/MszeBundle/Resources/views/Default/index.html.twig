{% extends "::base_start.html.twig" %}

{% block body %}
<center>
<img  height="150" src="http://upload.wikimedia.org/wikipedia/commons/b/b1/Church_in_Modzerowo.jpg" alt="kos">

{# <img src="{{ asset('images/test.jpg') }}" alt="img test"> #}
<br/>
<br/>

<form action="{{ path('show_city') }}" method="get" >
    <input type="text" name="id" id="search_dst"/>
    <input type="button" value="Pokaż" id="search_show"/>
</form>


<br/><br/>

<a href="{{ path('edit_or_add') }}">
+ Dodaj...
</a>


<style type="text/css">

.block_mass_main_table
{
    
}
.block_mass_main_table td
{
    text-align: center;
    vertical-align: top;
}
.block_mass_day_title
{
    font-size: 20px;
    border-bottom: 2px solid #777777;
    margin-bottom: 5px;
}

.block_mass_separator
{
    width: 20px;
}
.block_mass_inner_table
{
    width: 220px;
}
.block_mass_line
{
    display: block;
    margin: 0 auto;
    background-color: #fcefa1;
    width: 5px;
    height: 20px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
}
.block_mass_entry
{
    width: 130px;
    margin: 0 auto;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    cursor: pointer;
}

.block_mass_entry:hover
{
    background-color: #DFDFDF;
}
.block_mass_hour
{
    font-size: 13px;
    font-weight: bold;
}
.block_mass_desc
{
    font-size: 10px;
}

.block_mass_new
{
    background-color: lightgreen;
}

.block_mass_del
{
    background-color: lightcoral;
}

.block_mass_edit
{
    background-color: goldenrod;
}

.block_mass_button {
	-moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
	-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
	box-shadow:inset 0px 1px 0px 0px #ffffff;
	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
	background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
	background-color:#ededed;
	-moz-border-radius:6px;
	-webkit-border-radius:6px;
	border-radius:6px;
	border:1px solid #dcdcdc;
	display:inline-block;
	color:#777777;
	font-family:Verdana;
	font-size:12px;
	font-weight:normal;
	padding:6px 23px;
	text-decoration:none;
	text-shadow:1px 1px 0px #ffffff;
}.block_mass_button:hover {
	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed) );
	background:-moz-linear-gradient( center top, #dfdfdf 5%, #ededed 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#dfdfdf', endColorstr='#ededed');
	background-color:#dfdfdf;
}.block_mass_button:active {
	position:relative;
	top:1px;
}
/* This imageless css button was generated by CSSButtonGenerator.com */

.block_mass_edit_win {
	-moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
	-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
	box-shadow:inset 0px 1px 0px 0px #ffffff;
	background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );
	background:-moz-linear-gradient( center top, #ededed 5%, #dfdfdf 100% );
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
	background-color:#ededed;
	-moz-border-radius:140px;
	-webkit-border-radius:140px;
	border-radius:140px;
	border:1px solid #dcdcdc;
	display:inline-block;
	color:#777777;
	font-family:Verdana;
	font-size:12px;
	font-weight:normal;
	/*padding:25px 25px;*/
	text-decoration:none;
	text-shadow:1px 1px 0px #ffffff;
        width: 220px;
        height: 220px;
        
        position: relative;
}


.block_mass_edit_sun
{
    position: absolute;
    background-color: red;
    top: 200px;
    left: 300px;
}

.block_mass_edit_other
{
    position: absolute;
    background-color: red;
    top: 200px;
    left: 600px;
}

.block_mass_edit_box
{
    width: 20px;
}

.block_mass_edit_textarea
{
    width: 140px;
    height: 30px;
}
.block_mass_edit_el
{
    position: absolute;
    background-color: #cdeb8e;
    cursor: pointer;
    width: 25px;
    height: 22px;
    text-align: center;
    padding-top: 3px;
    -moz-border-radius:25px;
    -webkit-border-radius:25px;
    border-radius:25px;
    display: none;
    text-shadow:none;
}
.block_mass_edit_el:hover
{
    background-color: lightcoral;
    color: #fff;
}

</style>

<table class="block_mass_main_table">
    <tr>
        <td class="block_mass_sun">
            <div class="block_mass_day_title">Niedziela</div>
            <a href="#" class="block_mass_button block_mass_button_sun">+ Dodaj</a>
            
            <table class="block_mass_inner_table">
                <tr><td><div class="block_mass_line"></div></td></tr>
                <tr><td>
                        <div class="block_mass_entry">
                            <div class="block_mass_hour">8:00</div>
                            <div class="block_mass_desc"></div>
                        </div>
                </td></tr>
                        
                <tr><td><div class="block_mass_line"></div></td></tr>
                <tr><td>
                        <div class="block_mass_entry block_mass_edit">
                            <div class="block_mass_hour">12:12</div>
                            <div class="block_mass_desc">Opis tej właśnie mszy jakiś taki</div>
                        </div>
                </td></tr>
                
            </table>
        </td>
        <td class="block_mass_separator"></td>
        <td class="block_mass_other">
            <div class="block_mass_day_title">Dni powszednie</div>
            <a href="#" class="block_mass_button block_mass_button_other">+ Dodaj</a>
            
            <table class="block_mass_inner_table">
                <tr><td><div class="block_mass_line"></div></td></tr>
                <tr><td>
                        <div class="block_mass_entry block_mass_new">
                            <div class="block_mass_hour">8:00</div>
                            <div class="block_mass_days">pn, wt, śr, czw, pt, so</div>
                            <div class="block_mass_desc"></div>
                        </div>
                </td></tr>
                        
                <tr><td><div class="block_mass_line"></div></td></tr>
                <tr><td>
                        <div class="block_mass_entry">
                            <div class="block_mass_hour">12:12</div>
                            <div class="block_mass_days">pn, wt, śr, czw, pt, so</div>
                            <div class="block_mass_desc">Opis tej właśnie mszy jakiś taki</div>
                        </div>
                </td></tr>
                        
                <tr><td><div class="block_mass_line"></div></td></tr>
                <tr><td>
                        <div class="block_mass_entry block_mass_del">
                            <div class="block_mass_hour">12:12</div>
                            <div class="block_mass_days">pn, wt, so</div>
                            <div class="block_mass_desc">Opis tej właśnie mszy jakiś taki</div>
                        </div>
                </td></tr>
            </table>
        </td>
    </tr>
</table>
<div class="block_mass_edit_win block_mass_edit_sun">
    <h3>Nowa msza</h3>
    <p>Niedziela</p>
    <p>
    <input type="text" class="block_mass_edit_box block_mass_edit_hour" name="hour" value="12" maxlength="2"></input>
    :
    <input type="text" class="block_mass_edit_box block_mass_edit_minute" name="minute" value="00" maxlength="2"></input>
    </p>
    <p>
        <textarea name="details" class="block_mass_edit_textarea" placeholder="Szczegóły"></textarea>
    </p>
    <p>Anuluj Usuń Zapisz</p>
    {% for i in 1..24 %}
        <div class="block_mass_edit_el block_mass_edit_hour_el block_mass_edit_hour_{{i}}">{% if i < 10 %}0{% endif %}{{i}}</div>
    {% endfor %}
        
    {% for i in 0..11 %}
        <div class="block_mass_edit_el block_mass_edit_min_el block_mass_edit_min_{{i}}">{% if i*5 < 10 %}0{% endif %}{{i*5}}</div>
    {% endfor %}
</div>

<div class="block_mass_edit_win block_mass_edit_other">
    <h3>Nowa msza</h3>
    <p>Dni powszednie</p>
    <p>
    <input type="text" class="block_mass_edit_box block_mass_edit_hour" name="hour" value="12" maxlength="2"></input>
    :
    <input type="text" class="block_mass_edit_box block_mass_edit_minute" name="minute" value="00" maxlength="2"></input>
    </p>
    <p>
       <input type="checkbox" class="chb_change" name="day_mon" value="0"></input>
       <input type="checkbox" class="chb_change" name="day_tue" value="1"></input>
       <input type="checkbox" class="chb_change" name="day_wed" value="2"></input>
       <input type="checkbox" class="chb_change" name="day_thu" value="3"></input>
       <input type="checkbox" class="chb_change" name="day_fri" value="4"></input>
       <input type="checkbox" class="chb_change" name="day_sat" value="5"></input>
    </p>
    <p>
        <textarea name="details" class="block_mass_edit_textarea" placeholder="Szczegóły"></textarea>
    </p>
    <p>Anuluj Usuń Zapisz</p>
    {% for i in 1..24 %}
        <div class="block_mass_edit_el block_mass_edit_hour_el block_mass_edit_hour_{{i}}">{% if i < 10 %}0{% endif %}{{i}}</div>
    {% endfor %}
        
    {% for i in 0..11 %}
        <div class="block_mass_edit_el block_mass_edit_min_el block_mass_edit_min_{{i}}">{% if i*5 < 10 %}0{% endif %}{{i*5}}</div>
    {% endfor %}
</div>


</center>

{% endblock %}

{% block javascripts %}
<script type="text/javascript">
      function showHours() {
          $('.block_mass_edit_hour_el').fadeIn();
      }
      function hideHours() {
          $('.block_mass_edit_hour_el').fadeOut();
      }
      
      function showMin() {
          $('.block_mass_edit_min_el').fadeIn();
      }
      function hideMin() {
          $('.block_mass_edit_min_el').fadeOut();
      }
    
      function organiazeHours() {
          var count = 24,
              cur = 0,
              step = 2*Math.PI/count,
              cheight = $('.block_mass_edit_win').height()/2,
              cwidth = $('.block_mass_edit_win').width()/2,
              xheight = (40+$('.block_mass_edit_win').height())/2,
              xwidth = (40+$('.block_mass_edit_win').width())/2,
              cx, cy;
          
          for (var i = 1; i <= count; i++)
          {
            cx = cwidth + Math.sin(cur) * xwidth;
            cy = cheight + Math.cos(cur) * xheight;
            $('.block_mass_edit_hour_' + i).css('left', (cx - 12) + 'px');
            $('.block_mass_edit_hour_' + i).css('top', (cy - 11) + 'px');
            cur = cur + step;
          }
      }
      
      function organiazeMinutes() {
          var count = 12,
              cur = 0,
              step = 2*Math.PI/count,
              cheight = $('.block_mass_edit_win').height()/2,
              cwidth = $('.block_mass_edit_win').width()/2,
              xheight = (40+$('.block_mass_edit_win').height())/2,
              xwidth = (40+$('.block_mass_edit_win').width())/2,
              cx, cy;
          
          for (var i = 0; i < count; i++)
          {
            cx = cwidth + Math.sin(cur) * xwidth;
            cy = cheight - Math.cos(cur) * xheight;
            $('.block_mass_edit_min_' + i).css('left', (cx - 12) + 'px');
            $('.block_mass_edit_min_' + i).css('top', (cy - 11) + 'px');
            cur = cur + step;
          }
      }
    
    
      function movieFormatResult(city) {
        var markup = "<table class='movie-result'><tr>";
        /*if (movie.posters !== undefined && movie.posters.thumbnail !== undefined) {
            markup += "<td class='movie-image'><img src='" + movie.posters.thumbnail + "'/></td>";
        }
        markup += "<td class='movie-info'><div class='movie-title'>" + movie.title + "</div>";
        if (movie.critics_consensus !== undefined) {
            markup += "<div class='movie-synopsis'>" + movie.critics_consensus + "</div>";
        }
        else if (movie.synopsis !== undefined) {
            markup += "<div class='movie-synopsis'>" + movie.synopsis + "</div>";
        }
        markup += "</td></tr></table>"
        */
        markup += "<div class='search_city_result'>" +
            "<table><tr><td class='search_city_name'>" + city.name + "</td></tr>" +
                   "<tr><td class='search_city_dist'>" + (city.district == undefined ? '' : city.district) + "</td></tr>" +
            "</table></div>";
        return markup;
    }

    function movieFormatSelection(city) {
        return city.name + " " + (city.district == undefined ? '' : '(' + city.district + ')');
    }
    
    $(document).ready(function() {
        $('#search_show').button();
        $('#search_show').click(function() {
  //          alert($("#search_dst").select2("val"));
            if ($("#search_dst").select2("val") != '')
            {
                $(this).parent().find("#search_dst").val($("#search_dst").select2("val"));
                $(this).parent().submit();
            }
        });
        
        $("#search_dst").val('');
        $("#search_dst").select2(
            {
                width: '350px',
                placeholder: "Szukaj miasta",
                minimumInputLength: 2,
                ajax: {
                    url: Routing.generate('show_cities', { _format: 'json' }),
                    dataType: 'json',
                    quietMillis: 100,
                    data: function (term, page) { // page is the one-based page number tracked by Select2
                        return {
                            s: term, //search term
                            page_limit: 10, // page size
                            page: page // page number
                            //apikey: "ju6z9mjyajq2djue3gbvv26p" // please do not use so this example keeps working
                        };
                },
                results: function (data, page) {
                    var more = (page * 10) < data.total; // whether or not there are more results available

                    // notice we return the value of more so Select2 knows if more results can be loaded
                    return {results: data, more: more};
                }
                },
                formatResult: movieFormatResult, // omitted for brevity, see the source of this page
                formatSelection: movieFormatSelection, // omitted for brevity, see the source of this page
                dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller
                escapeMarkup: function (m) { return m; }, // we do not want to escape markup since we are displaying html in results
                selectOnBlur: true,
                id: function(object)
                {
                    return object.id;
                },
                formatInputTooShort: function (input, min) { var n = min - input.length; return "Wpisz jeszcze " + n + " znak" + (n == 1? "" : "i"); },
                formatInputTooLong: function (input, max) { var n = input.length - max; return "Wpisz o " + n + "znak " + (n == 1? "" : n < 5?"i":"ów") + " mniej "; },
                formatLoadMore: function (pageNumber) { return "Wczytuję. Proszę czekać..."; },
                formatSearching: function () { return "Szukam..."; },
            }
        );
        organiazeHours();
        organiazeMinutes();
    });
</script>
{% endblock %}